services:
  - postgresql
addons:
  postgresql: '9.4'
before_install:
  - gem install bundler
  - bundle install
install:
  - nvm install 12
  - npm i -g yarn
  - yarn
cache:
  - bundler
before_script:
  - RAILS_ENV=test bundle exec rails webpacker:compile
  - psql -c 'create database instagram_test;' -U postgres
  - bundle exec rails db:create
  - bundle exec rails db:migrate
dist: trusty
language: ruby
rvm:
  - 2.6.5
script:
  - bundle exec rubocop
  - bundle exec rspec
deploy:
  provider: heroku
  api_key:
    secure: XSsHjABySKBX4gUsYD3rU4atJbV6X9Tjis4UJ4m0UutRNm+URsGMFM7WFMqH55UAQZ+t5E+RGmg4BhdGG4V86y34DCkpUv0+1JnSEy9KxcNaynK1Q6CkyOR4yn9INvBPjnGBtyqkP8t6628z9mbos8+EMH4uEn+LJpU3UD2sfAzN3gYoCYPbD1dUQpylTcFX3M5Pe6CobAYF2gE4en2iKII31ORCEiP/252MbaOq3uQO8Xm6M7DScOEcb4TLxCfmvVs8/PrPKpvp7EJEk5dzWTkhoOun2PVTqD9qT5M3t67OKHTZUqaGNMDKZ3SILJmyVbnDy0z2qU87V68FsLJ6RMKIjMOx9zIJMmcDYfSoNKYquQ2IqZDdq8JTgscV4HOxxe8Xb1mc2xm4yiCwPrKFKDN17i35MtCfF4DYib8vKK5UQb8TMg1Mn6SDKQM3VNk5ZOP3lqa/+STm1dxoTIGLkC2I9yVP2KnrdM8QlEHSK6VH4Ibqca6TLgLbguy4KcQqKoS51JNwqy1vdbrHsBf2GlEMAajAhucusbgE7TOYHotUhR4TKnMdPCz1eK6DdMc+dcQ5HUagXJJz5E78LzFuKh7YFBktGBqYbAJC4hN/dNYWCaPl1lwx02bnCeCOClJyb4JY68z9xoMkmpd7QtdYMY548xF/PEL/Gtx9q18y/ak=
